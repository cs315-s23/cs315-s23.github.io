<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Lab04 | CS 315 - Computer Architecture - Spring 2023</title>
<meta name="generator" content="Jekyll v4.2.1" />
<meta property="og:title" content="Lab04" />
<meta name="author" content="Phil Peterson" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Requirements You will use the given code, lecture material, and RISC-V reference manual to develop a C program which can read RISC-V machine code and emulate what the instructions would do on a real processor. For reference see the RISC-V ISA Specification Volume 1 Chapter 2 RV32I Base Integer Instruction Set (pages 13-24) Chapter 5 RV64I Base Integer Instruction Set (pages 35-40) Chapter 7 “M” Standard Extension for Integer Multiplication and Division (pages 43-44) Chapter 24 RV32/64G Instruction Set Listings (pages 129-131 Chapter 25 RISC-V Assembly Programmers Handbook - Pseudo Instructions (pages 137-140) General RISC-V emulation guide You do not need to emulate the whole RISC-V processor – just enough to execute the given assembly programs: quadratic_s, midpoint_s, max3_s, and get_bitseq_s. The given code provides a framework for testing that the emulator output matches the output of the C and assembly language versions of the programs Your emulator will need logic, including data processing (add, mv, sub, etc.) and branching (j, bCC, jal (call), jalr (ret)) to run the programs Your emulator will need state, including the general purpose registers and the program counter (pc)" />
<meta property="og:description" content="Requirements You will use the given code, lecture material, and RISC-V reference manual to develop a C program which can read RISC-V machine code and emulate what the instructions would do on a real processor. For reference see the RISC-V ISA Specification Volume 1 Chapter 2 RV32I Base Integer Instruction Set (pages 13-24) Chapter 5 RV64I Base Integer Instruction Set (pages 35-40) Chapter 7 “M” Standard Extension for Integer Multiplication and Division (pages 43-44) Chapter 24 RV32/64G Instruction Set Listings (pages 129-131 Chapter 25 RISC-V Assembly Programmers Handbook - Pseudo Instructions (pages 137-140) General RISC-V emulation guide You do not need to emulate the whole RISC-V processor – just enough to execute the given assembly programs: quadratic_s, midpoint_s, max3_s, and get_bitseq_s. The given code provides a framework for testing that the emulator output matches the output of the C and assembly language versions of the programs Your emulator will need logic, including data processing (add, mv, sub, etc.) and branching (j, bCC, jal (call), jalr (ret)) to run the programs Your emulator will need state, including the general purpose registers and the program counter (pc)" />
<meta property="og:site_name" content="CS 315 - Computer Architecture - Spring 2023" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-05-12T04:57:54+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Lab04" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Phil Peterson"},"headline":"Lab04","dateModified":"2023-05-12T04:57:54+00:00","datePublished":"2023-05-12T04:57:54+00:00","url":"/assignments/lab04","description":"Requirements You will use the given code, lecture material, and RISC-V reference manual to develop a C program which can read RISC-V machine code and emulate what the instructions would do on a real processor. For reference see the RISC-V ISA Specification Volume 1 Chapter 2 RV32I Base Integer Instruction Set (pages 13-24) Chapter 5 RV64I Base Integer Instruction Set (pages 35-40) Chapter 7 “M” Standard Extension for Integer Multiplication and Division (pages 43-44) Chapter 24 RV32/64G Instruction Set Listings (pages 129-131 Chapter 25 RISC-V Assembly Programmers Handbook - Pseudo Instructions (pages 137-140) General RISC-V emulation guide You do not need to emulate the whole RISC-V processor – just enough to execute the given assembly programs: quadratic_s, midpoint_s, max3_s, and get_bitseq_s. The given code provides a framework for testing that the emulator output matches the output of the C and assembly language versions of the programs Your emulator will need logic, including data processing (add, mv, sub, etc.) and branching (j, bCC, jal (call), jalr (ret)) to run the programs Your emulator will need state, including the general purpose registers and the program counter (pc)","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"/assignments/lab04"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="CS 315 - Computer Architecture - Spring 2023" /><head>
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">  
</head>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">CS 315 - Computer Architecture - Spring 2023</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/syllabus/">Syllabus</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper"><h1 class="page-heading">Lab04</h1><div class="container">
  Due: 
  <span class="due-date">
    Tue, Mar 7, 2023 at 11:59 PM 
  </span>
  to <a href="https://classroom.github.com/a/NvPesi6N">Github Classroom Assignment</a>
  <hr>
  <section id="main_content">
    <p>Requirements</p>
<ol>
  <li>You will use the given code, lecture material, and RISC-V reference manual to develop a C program which can read RISC-V machine code and emulate what the instructions would do on a real processor.</li>
  <li>For reference see the <a href="https://github.com/riscv/riscv-isa-manual/releases/download/Ratified-IMAFDQC/riscv-spec-20191213.pdf">RISC-V ISA Specification Volume 1</a>
    <ol>
      <li>Chapter 2 RV32I Base Integer Instruction  Set (pages 13-24)</li>
      <li>Chapter 5 RV64I Base Integer Instruction Set (pages 35-40)</li>
      <li>Chapter 7 “M” Standard Extension for Integer Multiplication and Division (pages 43-44)</li>
      <li>Chapter 24 RV32/64G Instruction Set Listings (pages 129-131</li>
      <li>Chapter 25 RISC-V Assembly Programmers Handbook - Pseudo Instructions (pages 137-140)</li>
      <li><a href="https://github.com/usfca-cs-tools/docs/blob/main/risc-v-emulation.md">General  RISC-V emulation guide</a></li>
    </ol>
  </li>
  <li>You do not need to emulate the whole RISC-V processor – just enough to execute the given assembly programs: <code class="language-plaintext highlighter-rouge">quadratic_s</code>, <code class="language-plaintext highlighter-rouge">midpoint_s</code>, <code class="language-plaintext highlighter-rouge">max3_s</code>, and <code class="language-plaintext highlighter-rouge">get_bitseq_s</code>.</li>
  <li>The given code provides a framework for testing that the emulator output matches the output of the C and assembly language versions of the programs</li>
  <li>Your emulator will need logic, including data processing (<code class="language-plaintext highlighter-rouge">add</code>, <code class="language-plaintext highlighter-rouge">mv</code>, <code class="language-plaintext highlighter-rouge">sub</code>, etc.) and branching (<code class="language-plaintext highlighter-rouge">j</code>, <code class="language-plaintext highlighter-rouge">bCC</code>, <code class="language-plaintext highlighter-rouge">jal</code> (<code class="language-plaintext highlighter-rouge">call</code>), <code class="language-plaintext highlighter-rouge">jalr</code> (<code class="language-plaintext highlighter-rouge">ret</code>)) to run the programs</li>
  <li>Your emulator will need state, including the general purpose registers and the program counter (<code class="language-plaintext highlighter-rouge">pc</code>)</li>
</ol>

<h2 id="example-output">Example Output</h2>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./lab04 quadratic 2 4 6 8
C: 36
Asm: 36
Emu: 36

$ ./lab04 midpoint 0 4
C: 2
Asm: 2
Emu: 2

$ ./lab04 max3 3 8 5
C: 8
Asm: 8
Emu: 8

$ ./lab04 get_bitseq 94117 12 15
C: 6
Asm: 6
Emu: 6
</code></pre></div></div>

<h2 id="rubric">Rubric</h2>
<ol>
  <li>Your lab will receive the score indicated by the autograder</li>
  <li>To get the test cases, git pull in the tests repo</li>
</ol>

  </section>
</div>

      </div>
    </main>

  </body>

</html>
